
> saas-template@0.1.0 dev
> next dev

 ‚ö† Port 3000 is in use, trying 3001 instead.
  ‚ñ≤ Next.js 14.2.31
  - Local:        http://localhost:3001
  - Environment ‚úì Compiled /src/middleware in 315ms (188 modules)
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755383035,
  fva: [ 57, -1 ],
  iat: 1755382975,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  nbf: 1755382965,
  sid: 'sess_31Nzq5HC9DHu0HLh1eRK56e8UPG',
  sub: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 ‚óã Compiling /onboarding ...
 ‚úì Compiled /onboarding in 3.6s (1571 modules)
 GET /onboarding 200 in 4036ms
 ‚úì Compiled in 524ms (613 modules)
 ‚úì Compiled in 469ms (801 modules)
 ‚ö† Fast Refresh had to perform a full reload due to a runtime error.
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 39ms
 ‚úì Compiled in 331ms (801 modules)
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 13ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: undefined,
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: undefined,
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755383223,
  fva: [ 60, -1 ],
  iat: 1755383163,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  nbf: 1755383153,
  sid: 'sess_31Nzq5HC9DHu0HLh1eRK56e8UPG',
  sub: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 33ms
 ‚úì Compiled /api/user/update-metadata in 468ms (962 modules)
API route called: /api/user/update-metadata
User ID from auth: user_31Nzq4PyWPSPod2tV49BTWphs2p
Request body: { onboardingComplete: true }
Attempting to update user metadata for user: user_31Nzq4PyWPSPod2tV49BTWphs2p
Updating metadata with: { onboardingComplete: true }
Update result: _User {
  id: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755379505146,
  updatedAt: 1755379842429,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxTnpxNFB5V1BTUG9kMnRWNDlCVFdwaHMycCJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31NzooSqCyQv9Og4mQCV9g62BA4',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755379505153,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: {
    role: 'owner',
    tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1',
    onboardingComplete: true
  },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31NzooSqCyQv9Og4mQCV9g62BA4',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755379505146,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxTnpxNFB5V1BTUG9kMnRWNDlCVFdwaHMycCJ9',
    has_image: false,
    primary_email_address_id: 'idn_31NzooSqCyQv9Og4mQCV9g62BA4',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1',
      onboardingComplete: true
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755379505153,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755379505146,
    updated_at: 1755379842429,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755379505146,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 955ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: undefined,
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: undefined,
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755383306,
  fva: [ 62, -1 ],
  iat: 1755383246,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  nbf: 1755383236,
  sid: 'sess_31Nzq5HC9DHu0HLh1eRK56e8UPG',
  sub: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 141ms
üö´ No user ID, redirecting to sign-in
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 54ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31Nzq4PyWPSPod2tV49BTWphs2p
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755383453,
  fva: [ 64, -1 ],
  iat: 1755383393,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  nbf: 1755383383,
  sid: 'sess_31Nzq5HC9DHu0HLh1eRK56e8UPG',
  sub: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  metadata: {
    role: 'owner',
    tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755379505146,
    updatedAt: 1755379842429,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxTnpxNFB5V1BTUG9kMnRWNDlCVFdwaHMycCJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31NzooSqCyQv9Og4mQCV9g62BA4',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755379505153,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755379505146,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxTnpxNFB5V1BTUG9kMnRWNDlCVFdwaHMycCJ9',
      has_image: false,
      primary_email_address_id: 'idn_31NzooSqCyQv9Og4mQCV9g62BA4',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755379505153,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755379505146,
      updated_at: 1755379842429,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755379505146,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31Nzq4PyWPSPod2tV49BTWphs2p
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: undefined,
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: undefined,
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755383453,
  fva: [ 64, -1 ],
  iat: 1755383393,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  nbf: 1755383383,
  sid: 'sess_31Nzq5HC9DHu0HLh1eRK56e8UPG',
  sub: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 17ms
 POST /onboarding 303 in 8563ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 12ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 ‚óã Compiling /dashboard ...
 ‚úì Compiled /dashboard in 1929ms (2924 modules)
 GET /dashboard 200 in 2172ms
‚úÖ User authenticated and onboarding complete, allowing access
 ‚óã Compiling / ...
 ‚úì Compiled / in 844ms (2946 modules)
 GET / 200 in 996ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 37ms
‚úÖ User authenticated and onboarding complete, allowing access
 GET / 200 in 29ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 35ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31Nzq4PyWPSPod2tV49BTWphs2p',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'f205fea2-6287-4795-9b7e-644f171598f1'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 32ms
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: {},
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387040,
  fva: [ 0, -1 ],
  iat: 1755386980,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '61ee13eb3f4efba97f90',
  metadata: {},
  nbf: 1755386970,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 67ms
 ‚úì Compiled /api/user/update-metadata in 416ms (1660 modules)
API route called: /api/user/update-metadata
API route called: /api/user/update-metadata
User ID from auth: user_31OEzKUQWKwnAQIZJOE6lK82lCO
User ID from auth: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Request body: { tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491', role: 'owner' }
Attempting to update user metadata for user: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Request body: { tenant_id: 'bca75e86-dde8-4101-9653-8c9fa5ba08ea', role: 'owner' }
Attempting to update user metadata for user: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Updating metadata with: { tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491', role: 'owner' }
Updating metadata with: { tenant_id: 'bca75e86-dde8-4101-9653-8c9fa5ba08ea', role: 'owner' }
Update result: _User {
  id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755386979393,
  updatedAt: 1755386982962,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755386979401,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: 'bca75e86-dde8-4101-9653-8c9fa5ba08ea' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755386979392,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: 'bca75e86-dde8-4101-9653-8c9fa5ba08ea'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755386979401,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755386979393,
    updated_at: 1755386982962,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755386979392,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 886ms
Update result: _User {
  id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755386979393,
  updatedAt: 1755386982987,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755386979401,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755386979392,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755386979401,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755386979393,
    updated_at: 1755386982987,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755386979392,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 904ms
 ‚óã Compiling /api/user/sync ...
 ‚úì Compiled /api/user/sync in 542ms (1743 modules)
Error creating auth user: AuthApiError: Database error creating new user
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/user/sync 500 in 1280ms
Error creating auth user: AuthApiError: Database error creating new user
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/user/sync 500 in 1185ms
Error creating auth user: AuthApiError: Database error creating new user
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/user/sync 500 in 1528ms
 POST /api/user/sync 200 in 1771ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
  },
  fullResult: _User {
    id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755386979393,
    updatedAt: 1755387006212,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755386979401,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      onboardingComplete: true,
      role: 'owner',
      tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755386979392,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755386979401,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755386979393,
      updated_at: 1755387006212,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755386979392,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OEzKUQWKwnAQIZJOE6lK82lCO
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 25ms
 POST /onboarding 303 in 7967ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 15ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  metadata: {
    role: 'owner',
    tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755386979393,
    updatedAt: 1755387006212,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755386979401,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755386979392,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755386979401,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755386979393,
      updated_at: 1755387006212,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755386979392,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OEzKUQWKwnAQIZJOE6lK82lCO
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 14ms
 POST /onboarding 303 in 8396ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 13ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  metadata: {
    role: 'owner',
    tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755386979393,
    updatedAt: 1755387006212,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755386979401,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755386979392,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755386979401,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755386979393,
      updated_at: 1755387006212,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755386979392,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OEzKUQWKwnAQIZJOE6lK82lCO
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 16ms
 POST /onboarding 303 in 8802ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 13ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387062,
  fva: [ 0, -1 ],
  iat: 1755387002,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '56ed85b6757443fd2573',
  metadata: { role: 'owner', tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491' },
  nbf: 1755386992,
  sid: 'sess_31OEzLRtLKOyJ847b34gwVHGtPf',
  sub: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 114ms
API route called: /api/user/update-metadata
User ID from auth: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Request body: { onboardingComplete: true }
Attempting to update user metadata for user: user_31OEzKUQWKwnAQIZJOE6lK82lCO
Updating metadata with: { onboardingComplete: true }
Update result: _User {
  id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755386979393,
  updatedAt: 1755387006212,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755386979401,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: {
    role: 'owner',
    tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491',
    onboardingComplete: true
  },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755386979392,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0V6S1VRV0t3bkFRSVpKT0U2bEs4MmxDTyJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OEy4gFPKQDsSfFMFcFeh4Kx8J',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491',
      onboardingComplete: true
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755386979401,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755386979393,
    updated_at: 1755387006212,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755386979392,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 384ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 31ms
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 28ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard?_rsc=3y0gy 200 in 16ms
‚úÖ User authenticated and onboarding complete, allowing access
 GET / 200 in 39ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 28ms
‚úÖ User authenticated and onboarding complete, allowing access
 GET / 200 in 30ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 23ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 30ms
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OEzKUQWKwnAQIZJOE6lK82lCO',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '60869f04-fa33-44fe-a673-eeefe1142491'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 16ms
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: {},
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387316,
  fva: [ 0, -1 ],
  iat: 1755387256,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '74b82a81ad57bf934ec1',
  metadata: {},
  nbf: 1755387246,
  sid: 'sess_31OFY0UC8TIpjEHiYKQ6umlCE0I',
  sub: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 33ms
API route called: /api/user/update-metadata
API route called: /api/user/update-metadata
User ID from auth: user_31OFXukmL1R9wubwgmxwEoyJxFY
User ID from auth: user_31OFXukmL1R9wubwgmxwEoyJxFY
Request body: { tenant_id: '73b51e92-1923-4ac4-b92f-9f173d6f507a', role: 'owner' }
Attempting to update user metadata for user: user_31OFXukmL1R9wubwgmxwEoyJxFY
Request body: { tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d', role: 'owner' }
Attempting to update user metadata for user: user_31OFXukmL1R9wubwgmxwEoyJxFY
Updating metadata with: { tenant_id: '73b51e92-1923-4ac4-b92f-9f173d6f507a', role: 'owner' }
Updating metadata with: { tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d', role: 'owner' }
Update result: _User {
  id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755387254999,
  updatedAt: 1755387257475,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755387255009,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '73b51e92-1923-4ac4-b92f-9f173d6f507a' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755387254998,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '73b51e92-1923-4ac4-b92f-9f173d6f507a'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755387255009,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755387254999,
    updated_at: 1755387257475,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755387254998,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 364ms
Update result: _User {
  id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755387254999,
  updatedAt: 1755387257518,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755387255009,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755387254998,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755387255009,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755387254999,
    updated_at: 1755387257518,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755387254998,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 412ms
Error creating auth user: AuthApiError: Database error creating new user
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/user/sync 500 in 699ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 582ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 724ms
 POST /api/user/sync 200 in 1000ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OFXukmL1R9wubwgmxwEoyJxFY
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387364,
  fva: [ 0, -1 ],
  iat: 1755387304,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '5eee50a8a0ae0cef8349',
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  nbf: 1755387294,
  sid: 'sess_31OFY0UC8TIpjEHiYKQ6umlCE0I',
  sub: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d'
  },
  fullResult: _User {
    id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387254999,
    updatedAt: 1755387306813,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387255009,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      onboardingComplete: true,
      role: 'owner',
      tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d'
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387254998,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387255009,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387254999,
      updated_at: 1755387306813,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387254998,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OFXukmL1R9wubwgmxwEoyJxFY
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387364,
  fva: [ 0, -1 ],
  iat: 1755387304,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '5eee50a8a0ae0cef8349',
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  nbf: 1755387294,
  sid: 'sess_31OFY0UC8TIpjEHiYKQ6umlCE0I',
  sub: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 21ms
 POST /onboarding 303 in 8606ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 12ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387364,
  fva: [ 0, -1 ],
  iat: 1755387304,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '5eee50a8a0ae0cef8349',
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  nbf: 1755387294,
  sid: 'sess_31OFY0UC8TIpjEHiYKQ6umlCE0I',
  sub: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OFXukmL1R9wubwgmxwEoyJxFY
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387364,
  fva: [ 0, -1 ],
  iat: 1755387304,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '5eee50a8a0ae0cef8349',
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  nbf: 1755387294,
  sid: 'sess_31OFY0UC8TIpjEHiYKQ6umlCE0I',
  sub: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  metadata: {
    role: 'owner',
    tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387254999,
    updatedAt: 1755387306813,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387255009,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387254998,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0ZYdWttTDFSOXd1YndnbXh3RW95SnhGWSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OFWQJN0klxF8k0pMQJ2eEEqaT',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387255009,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387254999,
      updated_at: 1755387306813,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387254998,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OFXukmL1R9wubwgmxwEoyJxFY
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387364,
  fva: [ 0, -1 ],
  iat: 1755387304,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '5eee50a8a0ae0cef8349',
  metadata: { role: 'owner', tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d' },
  nbf: 1755387294,
  sid: 'sess_31OFY0UC8TIpjEHiYKQ6umlCE0I',
  sub: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 14ms
 POST /onboarding 303 in 7995ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 13ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard?_rsc=3y0gy 200 in 13ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFXukmL1R9wubwgmxwEoyJxFY',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'bcc3157a-3691-492f-8982-527f726ef56d'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 45ms
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: {},
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387537,
  fva: [ 0, -1 ],
  iat: 1755387477,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: 'ef469382c8a83f3797f5',
  metadata: {},
  nbf: 1755387467,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 41ms
API route called: /api/user/update-metadata
User ID from auth: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Request body: { tenant_id: 'adebc93c-84f8-4652-9f9e-4d907d204881', role: 'owner' }
Attempting to update user metadata for user: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Updating metadata with: { tenant_id: 'adebc93c-84f8-4652-9f9e-4d907d204881', role: 'owner' }
API route called: /api/user/update-metadata
User ID from auth: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Request body: { tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db', role: 'owner' }
Attempting to update user metadata for user: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Updating metadata with: { tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db', role: 'owner' }
Update result: _User {
  id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755387475829,
  updatedAt: 1755387479228,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755387475834,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: 'adebc93c-84f8-4652-9f9e-4d907d204881' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755387475828,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: 'adebc93c-84f8-4652-9f9e-4d907d204881'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755387475834,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755387475829,
    updated_at: 1755387479228,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755387475828,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 431ms
Update result: _User {
  id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755387475829,
  updatedAt: 1755387479243,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755387475834,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755387475828,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755387475834,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755387475829,
    updated_at: 1755387479243,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755387475828,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 415ms
Error creating auth user: AuthApiError: Database error creating new user
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/user/sync 500 in 740ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 700ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 765ms
 POST /api/user/sync 200 in 1234ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db'
  },
  fullResult: _User {
    id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387475829,
    updatedAt: 1755387491632,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387475834,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      onboardingComplete: true,
      role: 'owner',
      tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db'
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387475828,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387475834,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387475829,
      updated_at: 1755387491632,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387475828,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 16ms
 POST /onboarding 303 in 8838ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 11ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  metadata: {
    role: 'owner',
    tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387475829,
    updatedAt: 1755387491632,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387475834,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387475828,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387475834,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387475829,
      updated_at: 1755387491632,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387475828,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 17ms
 POST /onboarding 303 in 8413ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 12ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  metadata: {
    role: 'owner',
    tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387475829,
    updatedAt: 1755387491632,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387475834,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387475828,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387475834,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387475829,
      updated_at: 1755387491632,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387475828,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 17ms
 POST /onboarding 303 in 7871ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 10ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  metadata: {
    role: 'owner',
    tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387475829,
    updatedAt: 1755387491632,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387475834,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387475828,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387475834,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387475829,
      updated_at: 1755387491632,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387475828,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 17ms
 POST /onboarding 303 in 8397ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 14ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755387547,
  fva: [ 0, -1 ],
  iat: 1755387487,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '80e1520b349968733183',
  metadata: { role: 'owner', tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db' },
  nbf: 1755387477,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755387594,
  fva: [ 0, -1 ],
  iat: 1755387534,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: 'fc0d6a7388a77253495d',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db'
  },
  nbf: 1755387524,
  sid: 'sess_31OFzbFegFW1IKkY1ZXCasLkqfB',
  sub: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  metadata: {
    role: 'owner',
    tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387475829,
    updatedAt: 1755387491632,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387475834,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387475828,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0Z6ZEZtWWVTM3VHekRYbWV5UUhtWG15cSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OFyIhgtop0rOh0oZroNKV1hCZ',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387475834,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387475829,
      updated_at: 1755387491632,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387475828,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OFzdFmYeS3uGzDXmeyQHmXmyq
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 22ms
 POST /onboarding 303 in 8553ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OFzdFmYeS3uGzDXmeyQHmXmyq',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: 'e8f8b13d-b10e-4a43-816e-29b52a3329db'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 24ms
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: {},
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755388009,
  fva: [ 0, -1 ],
  iat: 1755387949,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '85a727de648f483fc6d7',
  metadata: {},
  nbf: 1755387939,
  sid: 'sess_31OGx58CLTee7rFKqzyW3BU7oVC',
  sub: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 32ms
API route called: /api/user/update-metadata
API route called: /api/user/update-metadata
User ID from auth: user_31OGx3KKHb3m1aggMP6WvXiuD3I
User ID from auth: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Request body: { tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47', role: 'owner' }
Attempting to update user metadata for user: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Request body: { tenant_id: '5ea525e9-5468-4913-9d4c-7adbed85187f', role: 'owner' }
Attempting to update user metadata for user: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Updating metadata with: { tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47', role: 'owner' }
Updating metadata with: { tenant_id: '5ea525e9-5468-4913-9d4c-7adbed85187f', role: 'owner' }
Update result: _User {
  id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755387948354,
  updatedAt: 1755387952006,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755387948362,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '5ea525e9-5468-4913-9d4c-7adbed85187f' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755387948353,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '5ea525e9-5468-4913-9d4c-7adbed85187f'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755387948362,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755387948354,
    updated_at: 1755387952006,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755387948353,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 510ms
Update result: _User {
  id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755387948354,
  updatedAt: 1755387952016,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755387948362,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755387948353,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755387948362,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755387948354,
    updated_at: 1755387952016,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755387948353,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 521ms
Error creating auth user: AuthApiError: Database error creating new user
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/user/sync 500 in 705ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 598ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 623ms
 POST /api/user/sync 200 in 1159ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755388035,
  fva: [ 0, -1 ],
  iat: 1755387975,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '414fece49ac942c60933',
  metadata: { role: 'owner', tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47' },
  nbf: 1755387965,
  sid: 'sess_31OGx58CLTee7rFKqzyW3BU7oVC',
  sub: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
  },
  fullResult: _User {
    id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387948354,
    updatedAt: 1755387978087,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387948362,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      onboardingComplete: true,
      role: 'owner',
      tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387948353,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387948362,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387948354,
      updated_at: 1755387978087,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387948353,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OGx3KKHb3m1aggMP6WvXiuD3I
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755388035,
  fva: [ 0, -1 ],
  iat: 1755387975,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '414fece49ac942c60933',
  metadata: { role: 'owner', tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47' },
  nbf: 1755387965,
  sid: 'sess_31OGx58CLTee7rFKqzyW3BU7oVC',
  sub: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 19ms
 POST /onboarding 303 in 8540ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 14ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755388063,
  fva: [ 0, -1 ],
  iat: 1755388003,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '20f6635912a1cec5c611',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
  },
  nbf: 1755387993,
  sid: 'sess_31OGx58CLTee7rFKqzyW3BU7oVC',
  sub: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  metadata: {
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387948354,
    updatedAt: 1755387978087,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387948362,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387948353,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387948362,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387948354,
      updated_at: 1755387978087,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387948353,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OGx3KKHb3m1aggMP6WvXiuD3I
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 8392ms
 POST /onboarding 303 in 8367ms
 GET /dashboard 200 in 34ms
 ‚®Ø Error: failed to pipe response
    at er (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:35:387058)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async tQ.pipeToNodeResponse (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:35:388507)
    at async sendRenderResult (/home/jimbojay/code/saas_template/node_modules/next/dist/server/send-payload.js:120:5)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:937:13)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: TypeError: terminated
      at Fetch.onAborted (node:internal/deps/undici/undici:10300:53)
      at Fetch.emit (node:events:514:28)
      at Fetch.terminate (node:internal/deps/undici/undici:9487:14)
      at Object.onError (node:internal/deps/undici/undici:10418:38)
      at _Request.onError (node:internal/deps/undici/undici:6587:31)
      at errorRequest (node:internal/deps/undici/undici:9151:17)
      at Object.abort (node:internal/deps/undici/undici:8601:11)
      at Object.destroy (node:internal/deps/undici/undici:10151:25)
      at httpFetch (node:internal/deps/undici/undici:9947:45)
      ... 3 lines matching cause stack trace ...
      at async mainFetch (node:internal/deps/undici/undici:9717:20) {
    [cause]: DOMException [AbortError]: The operation was aborted.
        at new DOMException (node:internal/per_context/domexception:53:5)
        at Object.destroy (node:internal/deps/undici/undici:10151:33)
        at httpFetch (node:internal/deps/undici/undici:9947:45)
        at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
        at async schemeFetch (node:internal/deps/undici/undici:9854:18)
        at async node:internal/deps/undici/undici:9727:20
        at async mainFetch (node:internal/deps/undici/undici:9717:20)
  }
}
 ‚óã Compiling /_error ...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 ‚úì Compiled /_error in 1373ms (3259 modules)
 GET /dashboard?_rsc=1wie3 200 in 730ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard?_rsc=1jqx0 200 in 14ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755388063,
  fva: [ 0, -1 ],
  iat: 1755388003,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '20f6635912a1cec5c611',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
  },
  nbf: 1755387993,
  sid: 'sess_31OGx58CLTee7rFKqzyW3BU7oVC',
  sub: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  metadata: {
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387948354,
    updatedAt: 1755387978087,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387948362,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387948353,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387948362,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387948354,
      updated_at: 1755387978087,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387948353,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OGx3KKHb3m1aggMP6WvXiuD3I
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 7844ms
 POST /onboarding 303 in 7827ms
 ‚®Ø Error: failed to pipe response
    at er (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:35:387058)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async tQ.pipeToNodeResponse (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:35:388507)
    at async sendRenderResult (/home/jimbojay/code/saas_template/node_modules/next/dist/server/send-payload.js:120:5)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:937:13)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: TypeError: terminated
      at Fetch.onAborted (node:internal/deps/undici/undici:10300:53)
      at Fetch.emit (node:events:514:28)
      at Fetch.terminate (node:internal/deps/undici/undici:9487:14)
      at Object.onError (node:internal/deps/undici/undici:10418:38)
      at _Request.onError (node:internal/deps/undici/undici:6587:31)
      at errorRequest (node:internal/deps/undici/undici:9151:17)
      at Object.abort (node:internal/deps/undici/undici:8601:11)
      at Object.destroy (node:internal/deps/undici/undici:10151:25)
      at httpFetch (node:internal/deps/undici/undici:9947:45)
      ... 3 lines matching cause stack trace ...
      at async mainFetch (node:internal/deps/undici/undici:9717:20) {
    [cause]: DOMException [AbortError]: The operation was aborted.
        at new DOMException (node:internal/per_context/domexception:53:5)
        at Object.destroy (node:internal/deps/undici/undici:10151:33)
        at httpFetch (node:internal/deps/undici/undici:9947:45)
        at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
        at async schemeFetch (node:internal/deps/undici/undici:9854:18)
        at async node:internal/deps/undici/undici:9727:20
        at async mainFetch (node:internal/deps/undici/undici:9717:20)
  }
}
 GET /dashboard 200 in 27ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755388063,
  fva: [ 0, -1 ],
  iat: 1755388003,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '20f6635912a1cec5c611',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
  },
  nbf: 1755387993,
  sid: 'sess_31OGx58CLTee7rFKqzyW3BU7oVC',
  sub: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  metadata: {
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387948354,
    updatedAt: 1755387978087,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387948362,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387948353,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387948362,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387948354,
      updated_at: 1755387978087,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387948353,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OGx3KKHb3m1aggMP6WvXiuD3I
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 8322ms
 POST /onboarding 303 in 8307ms
 ‚®Ø Error: failed to pipe response
    at er (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:35:387058)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async tQ.pipeToNodeResponse (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:35:388507)
    at async sendRenderResult (/home/jimbojay/code/saas_template/node_modules/next/dist/server/send-payload.js:120:5)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:937:13)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  [cause]: TypeError: terminated
      at Fetch.onAborted (node:internal/deps/undici/undici:10300:53)
      at Fetch.emit (node:events:514:28)
      at Fetch.terminate (node:internal/deps/undici/undici:9487:14)
      at Object.onError (node:internal/deps/undici/undici:10418:38)
      at _Request.onError (node:internal/deps/undici/undici:6587:31)
      at errorRequest (node:internal/deps/undici/undici:9151:17)
      at Object.abort (node:internal/deps/undici/undici:8601:11)
      at Object.destroy (node:internal/deps/undici/undici:10151:25)
      at httpFetch (node:internal/deps/undici/undici:9947:45)
      ... 3 lines matching cause stack trace ...
      at async mainFetch (node:internal/deps/undici/undici:9717:20) {
    [cause]: DOMException [AbortError]: The operation was aborted.
        at new DOMException (node:internal/per_context/domexception:53:5)
        at Object.destroy (node:internal/deps/undici/undici:10151:33)
        at httpFetch (node:internal/deps/undici/undici:9947:45)
        at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
        at async schemeFetch (node:internal/deps/undici/undici:9854:18)
        at async node:internal/deps/undici/undici:9727:20
        at async mainFetch (node:internal/deps/undici/undici:9717:20)
  }
}
 GET /dashboard 200 in 27ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OGx3KKHb3m1aggMP6WvXiuD3I
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755388063,
  fva: [ 0, -1 ],
  iat: 1755388003,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '20f6635912a1cec5c611',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
  },
  nbf: 1755387993,
  sid: 'sess_31OGx58CLTee7rFKqzyW3BU7oVC',
  sub: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  metadata: {
    role: 'owner',
    tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755387948354,
    updatedAt: 1755387978087,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755387948362,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755387948353,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0d4M0tLSGIzbTFhZ2dNUDZXdlhpdUQzSSJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OGvF2PqgfBoel4gNuZyGzSoF6',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755387948362,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755387948354,
      updated_at: 1755387978087,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755387948353,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OGx3KKHb3m1aggMP6WvXiuD3I
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard 200 in 103ms
 POST /dashboard 200 in 7435ms
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /onboarding 303 in 8548ms
 GET /dashboard 200 in 16ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OGx3KKHb3m1aggMP6WvXiuD3I',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '87b05931-23b4-4baf-8c68-5d1a08deae47'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 POST /dashboard 200 in 26ms
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: {},
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755388182,
  fva: [ 0, -1 ],
  iat: 1755388122,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: 'bf4fe9ba793ff6b0d0ef',
  metadata: {},
  nbf: 1755388112,
  sid: 'sess_31OHIr6w1OH51A1Xd6d0jPQSi7z',
  sub: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 76ms
API route called: /api/user/update-metadata
User ID from auth: user_31OHItFlW9cBtn0zatJ49G3sI1S
Request body: { tenant_id: '92270520-c36a-4f8f-b930-e892d760d167', role: 'owner' }
Attempting to update user metadata for user: user_31OHItFlW9cBtn0zatJ49G3sI1S
Updating metadata with: { tenant_id: '92270520-c36a-4f8f-b930-e892d760d167', role: 'owner' }
API route called: /api/user/update-metadata
User ID from auth: user_31OHItFlW9cBtn0zatJ49G3sI1S
Request body: { tenant_id: 'e031007b-6222-4142-bb82-a69067dc0258', role: 'owner' }
Attempting to update user metadata for user: user_31OHItFlW9cBtn0zatJ49G3sI1S
Updating metadata with: { tenant_id: 'e031007b-6222-4142-bb82-a69067dc0258', role: 'owner' }
Update result: _User {
  id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755388121639,
  updatedAt: 1755388125398,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755388121646,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: 'e031007b-6222-4142-bb82-a69067dc0258' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755388121638,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: 'e031007b-6222-4142-bb82-a69067dc0258'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755388121646,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755388121639,
    updated_at: 1755388125398,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755388121638,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 432ms
Update result: _User {
  id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755388121639,
  updatedAt: 1755388125414,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755388121646,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755388121638,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '92270520-c36a-4f8f-b930-e892d760d167'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755388121646,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755388121639,
    updated_at: 1755388125414,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755388121638,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 474ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 755ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 627ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 803ms
 POST /api/user/sync 200 in 1189ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OHItFlW9cBtn0zatJ49G3sI1S
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755388223,
  fva: [ 0, -1 ],
  iat: 1755388163,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '9af696d676b8a5312094',
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  nbf: 1755388153,
  sid: 'sess_31OHIr6w1OH51A1Xd6d0jPQSi7z',
  sub: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  metadata: {
    onboardingComplete: true,
    role: 'owner',
    tenant_id: '92270520-c36a-4f8f-b930-e892d760d167'
  },
  fullResult: _User {
    id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755388121639,
    updatedAt: 1755388165935,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755388121646,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      onboardingComplete: true,
      role: 'owner',
      tenant_id: '92270520-c36a-4f8f-b930-e892d760d167'
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755388121638,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755388121646,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755388121639,
      updated_at: 1755388165935,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755388121638,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OHItFlW9cBtn0zatJ49G3sI1S
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755388223,
  fva: [ 0, -1 ],
  iat: 1755388163,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '9af696d676b8a5312094',
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  nbf: 1755388153,
  sid: 'sess_31OHIr6w1OH51A1Xd6d0jPQSi7z',
  sub: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 16ms
 POST /onboarding 303 in 8417ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 15ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755388223,
  fva: [ 0, -1 ],
  iat: 1755388163,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '9af696d676b8a5312094',
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  nbf: 1755388153,
  sid: 'sess_31OHIr6w1OH51A1Xd6d0jPQSi7z',
  sub: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OHItFlW9cBtn0zatJ49G3sI1S
Current session claims before update: {
  azp: 'http://localhost:3000',
  exp: 1755388223,
  fva: [ 0, -1 ],
  iat: 1755388163,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '9af696d676b8a5312094',
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  nbf: 1755388153,
  sid: 'sess_31OHIr6w1OH51A1Xd6d0jPQSi7z',
  sub: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  v: 2
}
üîÑ Getting Clerk client...
üîÑ Updating user metadata...
‚úÖ Metadata update result: {
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  metadata: {
    role: 'owner',
    tenant_id: '92270520-c36a-4f8f-b930-e892d760d167',
    onboardingComplete: true
  },
  fullResult: _User {
    id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
    passwordEnabled: true,
    totpEnabled: false,
    backupCodeEnabled: false,
    twoFactorEnabled: false,
    banned: false,
    locked: false,
    createdAt: 1755388121639,
    updatedAt: 1755388165935,
    imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
    hasImage: false,
    primaryEmailAddressId: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
    primaryPhoneNumberId: null,
    primaryWeb3WalletId: null,
    lastSignInAt: 1755388121646,
    externalId: null,
    username: null,
    firstName: null,
    lastName: null,
    publicMetadata: {
      role: 'owner',
      tenant_id: '92270520-c36a-4f8f-b930-e892d760d167',
      onboardingComplete: true
    },
    privateMetadata: {},
    unsafeMetadata: {},
    emailAddresses: [ [_EmailAddress] ],
    phoneNumbers: [],
    web3Wallets: [],
    externalAccounts: [],
    samlAccounts: [],
    lastActiveAt: 1755388121638,
    createOrganizationEnabled: true,
    createOrganizationsLimit: null,
    deleteSelfEnabled: true,
    legalAcceptedAt: null,
    _raw: {
      id: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
      object: 'user',
      username: null,
      first_name: null,
      last_name: null,
      image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0hJdEZsVzljQnRuMHphdEo0OUczc0kxUyJ9',
      has_image: false,
      primary_email_address_id: 'idn_31OHHR3ZkelVUFFpsqQirAN3yMm',
      primary_phone_number_id: null,
      primary_web3_wallet_id: null,
      password_enabled: true,
      two_factor_enabled: false,
      totp_enabled: false,
      backup_code_enabled: false,
      email_addresses: [Array],
      phone_numbers: [],
      web3_wallets: [],
      passkeys: [],
      external_accounts: [],
      saml_accounts: [],
      enterprise_accounts: [],
      public_metadata: [Object],
      private_metadata: {},
      unsafe_metadata: {},
      external_id: null,
      last_sign_in_at: 1755388121646,
      banned: false,
      locked: false,
      lockout_expires_in_seconds: null,
      verification_attempts_remaining: 100,
      created_at: 1755388121639,
      updated_at: 1755388165935,
      delete_self_enabled: true,
      create_organization_enabled: true,
      last_active_at: 1755388121638,
      mfa_enabled_at: null,
      mfa_disabled_at: null,
      legal_accepted_at: null,
      profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
    }
  }
}
‚úÖ Onboarding completed for user: user_31OHItFlW9cBtn0zatJ49G3sI1S
‚è∞ Waiting for metadata propagation to Clerk servers (JWT has 60s lifetime)...
‚úÖ Metadata propagation delay completed
üîÑ Redirecting to dashboard after metadata propagation...
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  hasSessionClaims: true,
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  app_metadata: undefined,
  onboardingComplete: undefined,
  isOnboardingRoute: false,
  isPublicRoute: false
}
üîÑ Onboarding not complete, redirecting to onboarding: {
  onboardingComplete: undefined,
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  app_metadata: undefined,
  fullSessionClaims: {
  azp: 'http://localhost:3000',
  exp: 1755388223,
  fva: [ 0, -1 ],
  iat: 1755388163,
  iss: 'https://safe-starling-82.clerk.accounts.dev',
  jti: '9af696d676b8a5312094',
  metadata: { role: 'owner', tenant_id: '92270520-c36a-4f8f-b930-e892d760d167' },
  nbf: 1755388153,
  sid: 'sess_31OHIr6w1OH51A1Xd6d0jPQSi7z',
  sub: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  v: 2
}
}
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 21ms
 POST /onboarding 303 in 7755ms
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 18ms
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '92270520-c36a-4f8f-b930-e892d760d167'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '92270520-c36a-4f8f-b930-e892d760d167'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard?_rsc=3y0gy 200 in 15ms
 ‚úì Compiled in 509ms (1488 modules)
üîç Middleware Debug - Dashboard Access: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  hasSessionClaims: true,
  metadata: {
  onboardingComplete: true,
  role: 'owner',
  tenant_id: '92270520-c36a-4f8f-b930-e892d760d167'
},
  app_metadata: undefined,
  onboardingComplete: true,
  isOnboardingRoute: false,
  isPublicRoute: false
}
‚úÖ User authenticated and onboarding complete, allowing access
 GET /dashboard?_rsc=1jqx0 200 in 14ms
 ‚úì Compiled in 703ms (1735 modules)
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  profile: null,
  error: 'column profiles.onboarding_complete does not exist'
}
üîÑ Onboarding not complete in Supabase, redirecting to onboarding
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 18ms
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  profile: null,
  error: 'column profiles.onboarding_complete does not exist'
}
üîÑ Onboarding not complete in Supabase, redirecting to onboarding
‚úÖ Allowing access to onboarding route
 ‚úì Compiled in 1191ms (3265 modules)
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=12a6t 200 in 149ms
<w> [webpack.cache.PackFileCacheStrategy] Serializing big strings (108kiB) impacts deserialization performance (consider using Buffer instead and decode when needed)
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  profile: { onboarding_complete: true },
  error: undefined
}
‚úÖ User authenticated and onboarding complete in Supabase, allowing access
 ‚úì Compiled /api/user/sync in 400ms (1862 modules)
 POST /api/user/sync 200 in 1711ms
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  profile: { onboarding_complete: false },
  error: undefined
}
üîÑ Onboarding not complete in Supabase, redirecting to onboarding
‚úÖ Allowing access to onboarding route
 POST /onboarding 200 in 45ms
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OHItFlW9cBtn0zatJ49G3sI1S',
  profile: { onboarding_complete: false },
  error: undefined
}
üîÑ Onboarding not complete in Supabase, redirecting to onboarding
‚úÖ Allowing access to onboarding route
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/',
  userId: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  profile: null,
  error: 'JSON object requested, multiple (or no) rows returned'
}
üîÑ Onboarding not complete in Supabase, redirecting to onboarding
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 107ms
 ‚úì Compiled /api/user/update-metadata in 352ms (1781 modules)
API route called: /api/user/update-metadata
API route called: /api/user/update-metadata
User ID from auth: user_31OJfa3ChlYNKC6DMLYumyGYBxv
User ID from auth: user_31OJfa3ChlYNKC6DMLYumyGYBxv
Request body: { tenant_id: '4c9c814c-a826-478e-aea2-8ec81d2b879a', role: 'owner' }
Attempting to update user metadata for user: user_31OJfa3ChlYNKC6DMLYumyGYBxv
Request body: { tenant_id: '64ab0d51-811e-4b96-9d76-dc79d7007255', role: 'owner' }
Attempting to update user metadata for user: user_31OJfa3ChlYNKC6DMLYumyGYBxv
Updating metadata with: { tenant_id: '4c9c814c-a826-478e-aea2-8ec81d2b879a', role: 'owner' }
Updating metadata with: { tenant_id: '64ab0d51-811e-4b96-9d76-dc79d7007255', role: 'owner' }
Update result: _User {
  id: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755389289084,
  updatedAt: 1755389292965,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0pmYTNDaGxZTktDNkRNTFl1bXlHWUJ4diJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OJeSNlKOtn3ItJTzBcrMhiD7u',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755389289094,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '64ab0d51-811e-4b96-9d76-dc79d7007255' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OJeSNlKOtn3ItJTzBcrMhiD7u',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755389289083,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0pmYTNDaGxZTktDNkRNTFl1bXlHWUJ4diJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OJeSNlKOtn3ItJTzBcrMhiD7u',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '64ab0d51-811e-4b96-9d76-dc79d7007255'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755389289094,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755389289084,
    updated_at: 1755389292965,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755389289083,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 765ms
Update result: _User {
  id: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755389289084,
  updatedAt: 1755389292970,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0pmYTNDaGxZTktDNkRNTFl1bXlHWUJ4diJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OJeSNlKOtn3ItJTzBcrMhiD7u',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755389289094,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '4c9c814c-a826-478e-aea2-8ec81d2b879a' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OJeSNlKOtn3ItJTzBcrMhiD7u',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755389289083,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0pmYTNDaGxZTktDNkRNTFl1bXlHWUJ4diJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OJeSNlKOtn3ItJTzBcrMhiD7u',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '4c9c814c-a826-478e-aea2-8ec81d2b879a'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755389289094,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755389289084,
    updated_at: 1755389292970,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755389289083,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 735ms
 ‚úì Compiled /api/user/sync in 169ms (1864 modules)
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 676ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 986ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 796ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 767ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 190ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 199ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 90ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 109ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 180ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 75ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 97ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 237ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
‚ùå Supabase update error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
‚ùå Failed to complete onboarding: Error: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418
    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)
    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Error details: {
  name: 'Error',
  message: 'Failed to update profile: JSON object requested, multiple (or no) rows returned',
  stack: 'Error: Failed to update profile: JSON object requested, multiple (or no) rows returned\n' +
    '    at completeOnboarding (webpack-internal:///(action-browser)/./src/app/onboarding/actions.ts:37:19)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:39:418\n' +
    '    at async rk (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:38:8146)\n' +
    '    at async r3 (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-page.runtime.dev.js:41:1256)\n' +
    '    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1427:30)\n' +
    '    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)\n' +
    '    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)\n' +
    '    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)\n' +
    '    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)\n' +
    '    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)\n' +
    '    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)\n' +
    '    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)\n' +
    '    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20\n' +
    '    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)\n' +
    '    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)\n' +
    '    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)\n' +
    '    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)\n' +
    '    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)\n' +
    '    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13)'
}
 ‚®Ø src/app/onboarding/actions.ts (52:11) @ completeOnboarding
 ‚®Ø Error: Failed to complete onboarding: Failed to update profile: JSON object requested, multiple (or no) rows returned
    at completeOnboarding (./src/app/onboarding/actions.ts:47:15)
digest: "1830139550"
[0m [90m 50 |[39m       stack[33m:[39m error[33m?[39m[33m.[39mstack[0m
[0m [90m 51 |[39m     })[0m
[0m[31m[1m>[22m[39m[90m 52 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Failed to complete onboarding: ${error?.message || 'Unknown error'}`[39m)[0m
[0m [90m    |[39m           [31m[1m^[22m[39m[0m
[0m [90m 53 |[39m   }[0m
[0m [90m 54 |[39m   [0m
[0m [90m 55 |[39m   [90m// Redirect to dashboard immediately - no more JWT propagation delays![39m[0m
 POST /onboarding 500 in 120ms
 ‚úì Compiled in 656ms (3352 modules)
‚úÖ Allowing access to onboarding route
 GET /onboarding?_rsc=1wie3 200 in 54ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 719ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OJfa3ChlYNKC6DMLYumyGYBxv
üîÑ Updating onboarding status in Supabase...
üîç Looking for user with clerk_user_id: user_31OJfa3ChlYNKC6DMLYumyGYBxv
‚úÖ Found profile: {
  id: 'd2ab2542-0c3d-463e-9f50-7b2fb4a0386b',
  clerk_user_id: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  onboarding_complete: false
}
‚úÖ Onboarding completed in Supabase: {
  id: 'd2ab2542-0c3d-463e-9f50-7b2fb4a0386b',
  tenant_id: '4c9c814c-a826-478e-aea2-8ec81d2b879a',
  clerk_user_id: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  email: 'nextgendatalead@gmail.com',
  first_name: null,
  last_name: null,
  avatar_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0pmYTNDaGxZTktDNkRNTFl1bXlHWUJ4diJ9',
  role: 'owner',
  created_at: '2025-08-17T00:09:18.230465+00:00',
  updated_at: '2025-08-17T00:09:18.507084+00:00',
  last_sign_in_at: '2025-08-17T00:09:17.71+00:00',
  is_active: true,
  preferences: {},
  username: null,
  anonymized_at: null,
  deletion_reason: null,
  onboarding_complete: true
}
üîÑ Redirecting to dashboard...
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  profile: { onboarding_complete: true },
  error: undefined
}
‚úÖ User authenticated and onboarding complete in Supabase, allowing access
 GET /dashboard 200 in 24ms
 POST /onboarding 303 in 410ms
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/.well-known/appspecific/com.chrome.devtools.json',
  userId: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  profile: { onboarding_complete: true },
  error: undefined
}
‚úÖ User authenticated and onboarding complete in Supabase, allowing access
 ‚óã Compiling /_not-found ...
 ‚úì Compiled /_not-found in 592ms (3339 modules)
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 757ms
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OJfa3ChlYNKC6DMLYumyGYBxv',
  profile: { onboarding_complete: true },
  error: undefined
}
‚úÖ User authenticated and onboarding complete in Supabase, allowing access
 POST /dashboard 200 in 43ms
üö´ No user ID, redirecting to sign-in
üö´ No user ID, redirecting to sign-in
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/',
  userId: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
  profile: null,
  error: 'JSON object requested, multiple (or no) rows returned'
}
üîÑ Onboarding not complete in Supabase, redirecting to onboarding
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 64ms
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/.well-known/appspecific/com.chrome.devtools.json',
  userId: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
  profile: null,
  error: 'JSON object requested, multiple (or no) rows returned'
}
üîÑ Onboarding not complete in Supabase, redirecting to onboarding
‚úÖ Allowing access to onboarding route
 GET /onboarding 200 in 25ms
 ‚úì Compiled /api/user/update-metadata in 387ms (1781 modules)
API route called: /api/user/update-metadata
API route called: /api/user/update-metadata
User ID from auth: user_31OK527oN7Zt0rxa5echHkA5xdU
User ID from auth: user_31OK527oN7Zt0rxa5echHkA5xdU
Request body: { tenant_id: '59f7142d-6b9d-4344-8c20-c296e3ca39e9', role: 'owner' }
Attempting to update user metadata for user: user_31OK527oN7Zt0rxa5echHkA5xdU
Request body: { tenant_id: '60973a3c-3667-47b1-8118-2c217138c7fa', role: 'owner' }
Attempting to update user metadata for user: user_31OK527oN7Zt0rxa5echHkA5xdU
Updating metadata with: { tenant_id: '59f7142d-6b9d-4344-8c20-c296e3ca39e9', role: 'owner' }
Updating metadata with: { tenant_id: '60973a3c-3667-47b1-8118-2c217138c7fa', role: 'owner' }
Update result: _User {
  id: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755389491200,
  updatedAt: 1755389496381,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0s1MjdvTjdadDByeGE1ZWNoSGtBNXhkVSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OK2Xt6wcZFoG5OVBnOYDMy7Kd',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755389491211,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '60973a3c-3667-47b1-8118-2c217138c7fa' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OK2Xt6wcZFoG5OVBnOYDMy7Kd',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755389491200,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0s1MjdvTjdadDByeGE1ZWNoSGtBNXhkVSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OK2Xt6wcZFoG5OVBnOYDMy7Kd',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '60973a3c-3667-47b1-8118-2c217138c7fa'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755389491211,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755389491200,
    updated_at: 1755389496381,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755389491200,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 782ms
Update result: _User {
  id: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
  passwordEnabled: true,
  totpEnabled: false,
  backupCodeEnabled: false,
  twoFactorEnabled: false,
  banned: false,
  locked: false,
  createdAt: 1755389491200,
  updatedAt: 1755389496399,
  imageUrl: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0s1MjdvTjdadDByeGE1ZWNoSGtBNXhkVSJ9',
  hasImage: false,
  primaryEmailAddressId: 'idn_31OK2Xt6wcZFoG5OVBnOYDMy7Kd',
  primaryPhoneNumberId: null,
  primaryWeb3WalletId: null,
  lastSignInAt: 1755389491211,
  externalId: null,
  username: null,
  firstName: null,
  lastName: null,
  publicMetadata: { role: 'owner', tenant_id: '59f7142d-6b9d-4344-8c20-c296e3ca39e9' },
  privateMetadata: {},
  unsafeMetadata: {},
  emailAddresses: [
    _EmailAddress {
      id: 'idn_31OK2Xt6wcZFoG5OVBnOYDMy7Kd',
      emailAddress: 'nextgendatalead@gmail.com',
      verification: [_Verification],
      linkedTo: []
    }
  ],
  phoneNumbers: [],
  web3Wallets: [],
  externalAccounts: [],
  samlAccounts: [],
  lastActiveAt: 1755389491200,
  createOrganizationEnabled: true,
  createOrganizationsLimit: null,
  deleteSelfEnabled: true,
  legalAcceptedAt: null,
  _raw: {
    id: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
    object: 'user',
    username: null,
    first_name: null,
    last_name: null,
    image_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0s1MjdvTjdadDByeGE1ZWNoSGtBNXhkVSJ9',
    has_image: false,
    primary_email_address_id: 'idn_31OK2Xt6wcZFoG5OVBnOYDMy7Kd',
    primary_phone_number_id: null,
    primary_web3_wallet_id: null,
    password_enabled: true,
    two_factor_enabled: false,
    totp_enabled: false,
    backup_code_enabled: false,
    email_addresses: [ [Object] ],
    phone_numbers: [],
    web3_wallets: [],
    passkeys: [],
    external_accounts: [],
    saml_accounts: [],
    enterprise_accounts: [],
    public_metadata: {
      role: 'owner',
      tenant_id: '59f7142d-6b9d-4344-8c20-c296e3ca39e9'
    },
    private_metadata: {},
    unsafe_metadata: {},
    external_id: null,
    last_sign_in_at: 1755389491211,
    banned: false,
    locked: false,
    lockout_expires_in_seconds: null,
    verification_attempts_remaining: 100,
    created_at: 1755389491200,
    updated_at: 1755389496399,
    delete_self_enabled: true,
    create_organization_enabled: true,
    last_active_at: 1755389491200,
    mfa_enabled_at: null,
    mfa_disabled_at: null,
    legal_accepted_at: null,
    profile_image_url: 'https://www.gravatar.com/avatar?d=mp'
  }
}
 POST /api/user/update-metadata 200 in 802ms
 ‚úì Compiled /api/user/sync in 182ms (1864 modules)
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 929ms
Error creating auth user: AuthApiError: Database error creating new user
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 500,
  code: 'unexpected_failure'
}
 POST /api/user/sync 500 in 806ms
Error creating auth user: AuthApiError: A user with this email address has already been registered
    at handleError (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:80:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async _handleRequest (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:123:9)
    at async _request (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/lib/fetch.js:105:18)
    at async GoTrueAdminApi.createUser (webpack-internal:///(rsc)/./node_modules/@supabase/auth-js/dist/module/GoTrueAdminApi.js:122:20)
    at async POST (webpack-internal:///(rsc)/./src/app/api/user/sync/route.ts:62:58)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/jimbojay/code/saas_template/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/jimbojay/code/saas_template/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/home/jimbojay/code/saas_template/node_modules/next/dist/server/lib/start-server.js:141:13) {
  __isAuthError: true,
  status: 422,
  code: 'email_exists'
}
 POST /api/user/sync 500 in 839ms
 POST /api/user/sync 200 in 1345ms
‚úÖ Allowing access to onboarding route
üîÑ Starting onboarding completion...
User ID: user_31OK527oN7Zt0rxa5echHkA5xdU
üîÑ Updating onboarding status in Supabase...
üîç Looking for user with clerk_user_id: user_31OK527oN7Zt0rxa5echHkA5xdU
‚úÖ Found profile: {
  id: '065b5b27-187c-4a31-ace9-6368259cec05',
  clerk_user_id: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
  onboarding_complete: false
}
‚úÖ Onboarding completed in Supabase: {
  id: '065b5b27-187c-4a31-ace9-6368259cec05',
  tenant_id: '59f7142d-6b9d-4344-8c20-c296e3ca39e9',
  clerk_user_id: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
  email: 'nextgendatalead@gmail.com',
  first_name: null,
  last_name: null,
  avatar_url: 'https://img.clerk.com/eyJ0eXBlIjoiZGVmYXVsdCIsImlpZCI6Imluc18zMGtHNENxNTZVQVVHUXVXdGlwOWZkc1FVSE4iLCJyaWQiOiJ1c2VyXzMxT0s1MjdvTjdadDByeGE1ZWNoSGtBNXhkVSJ9',
  role: 'owner',
  created_at: '2025-08-17T00:11:38.004413+00:00',
  updated_at: '2025-08-17T00:11:59.936694+00:00',
  last_sign_in_at: '2025-08-17T00:11:38.325+00:00',
  is_active: true,
  preferences: {},
  username: null,
  anonymized_at: null,
  deletion_reason: null,
  onboarding_complete: true
}
üîÑ Redirecting to dashboard...
üîç Middleware - Supabase Check: {
  url: 'http://localhost:3000/dashboard',
  userId: 'user_31OK527oN7Zt0rxa5echHkA5xdU',
  profile: { onboarding_complete: true },
  error: undefined
}
‚úÖ User authenticated and onboarding complete in Supabase, allowing access
 GET /dashboard 200 in 33ms
 POST /onboarding 303 in 619ms
